{"ast":null,"code":"var _jsxFileName = \"/Users/megnabiederman/Desktop/GamerECSAMPLE/client/src/Stream.js\";\nimport React from 'react';\nimport './style/Backstage.css';\nimport { OTSession, OTPublisher, OTStreams, OTSubscriber } from 'opentok-react';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default class Stream extends React.Component {\n  componentDidMount() {\n    fetch(\"/api\").then(res => res.json()).then(data => this.setState({\n      apiKey: data.apiKey,\n      sessionId: data.sessionId,\n      token: data.token\n    })).catch(err => {\n      console.error('Failed to get session creddentials', err);\n      alert('Failed to get opentok sessionId and token');\n    });\n  }\n\n  constructor(props) {\n    super(props);\n\n    this.onSessionError = error => {\n      this.setState({\n        error\n      });\n    };\n\n    this.onPublish = () => {\n      console.log('Publish Success');\n    };\n\n    this.onPublishError = error => {\n      this.setState({\n        error\n      });\n    };\n\n    this.onSubscribe = () => {\n      console.log('Subscribe Success');\n    };\n\n    this.onSubscribeError = error => {\n      this.setState({\n        error\n      });\n    };\n\n    this.toggleVideo = () => {\n      this.setState(state => ({\n        publishVideo: !state.publishVideo\n      }));\n    };\n\n    this.togglePosition1 = () => {\n      this.setState(state => ({\n        position1: !state.position1\n      }));\n    };\n\n    this.togglePosition2 = () => {\n      this.setState(state => ({\n        position2: !state.position2\n      }));\n    };\n\n    this.togglePosition3 = () => {\n      this.setState(state => ({\n        position3: !state.position3\n      }));\n    };\n\n    this.togglePosition4 = () => {\n      this.setState(state => ({\n        position4: !state.position4\n      }));\n    };\n\n    this.state = {\n      error: null,\n      connection: 'Connecting',\n      publishVideo: true,\n      position1: false,\n      position2: false,\n      position3: false,\n      position4: false,\n      apiKey: \"\",\n      sessionId: \"\",\n      token: \"\"\n    };\n    this.sessionEventHandlers = {\n      sessionConnected: () => {\n        this.setState({\n          connection: 'Connected'\n        });\n      },\n      sessionDisconnected: () => {\n        this.setState({\n          connection: 'Disconnected'\n        });\n      },\n      sessionReconnected: () => {\n        this.setState({\n          connection: 'Reconnected'\n        });\n      },\n      sessionReconnecting: () => {\n        this.setState({\n          connection: 'Reconnecting'\n        });\n      }\n    };\n    this.publisherEventHandlers = {\n      accessDenied: () => {\n        console.log('User denied access to media source');\n      },\n      streamCreated: () => {\n        console.log('Publisher stream created');\n      },\n      streamDestroyed: _ref => {\n        let {\n          reason\n        } = _ref;\n        console.log(`Publisher stream destroyed because: ${reason}`);\n      }\n    };\n    this.subscriberEventHandlers = {\n      videoEnabled: () => {\n        console.log('Subscriber video enabled');\n      },\n      videoDisabled: () => {\n        console.log('Subscriber video disabled');\n      }\n    };\n    this.componentDidMount();\n  }\n\n  render() {\n    const {\n      apiKey,\n      sessionId,\n      token,\n      publishVideo\n    } = this.state; //alert(apiKey);\n\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      children: apiKey !== \"\" && sessionId !== \"\" && token !== \"\" && /*#__PURE__*/_jsxDEV(OTSession, {\n        apiKey: apiKey,\n        sessionId: sessionId,\n        token: token,\n        onError: this.onSessionError,\n        eventHandlers: this.sessionEventHandlers,\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"OT_publisher\",\n          children: [/*#__PURE__*/_jsxDEV(OTPublisher, {\n            properties: {\n              publishVideo,\n              width: 150,\n              height: 120\n            },\n            onPublish: this.onPublish,\n            onError: this.onPublishError,\n            eventHandlers: this.publisherEventHandlers\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 147,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            class: \"dropdown\",\n            children: [/*#__PURE__*/_jsxDEV(\"button\", {\n              class: \"dropbtn\",\n              children: \"Video Settings\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 154,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              class: \"dropdown-content\",\n              children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                id: \"videoButton\",\n                onClick: this.toggleVideo,\n                children: [publishVideo ? 'Disable' : 'Enable', \" Video\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 156,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                id: \"position1\",\n                onClick: this.togglePosition1,\n                children: \" Position 1 \"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 160,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                id: \"position2\",\n                onClick: this.togglePosition2,\n                children: \" Position 2 \"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 161,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                id: \"position3\",\n                onClick: this.togglePosition3,\n                children: \" Position 3 \"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 162,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                id: \"position4\",\n                onClick: this.togglePosition4,\n                children: \" Position 4 \"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 163,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 155,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 153,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 146,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(OTStreams, {\n          children: /*#__PURE__*/_jsxDEV(OTSubscriber, {\n            properties: {\n              width: 150,\n              height: 120\n            },\n            onSubscribe: this.onSubscribe,\n            onError: this.onSubscribeError,\n            eventHandlers: this.subscriberEventHandlers\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 171,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 169,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 139,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 136,\n      columnNumber: 7\n    }, this);\n  }\n\n}","map":{"version":3,"names":["React","OTSession","OTPublisher","OTStreams","OTSubscriber","Stream","Component","componentDidMount","fetch","then","res","json","data","setState","apiKey","sessionId","token","catch","err","console","error","alert","constructor","props","onSessionError","onPublish","log","onPublishError","onSubscribe","onSubscribeError","toggleVideo","state","publishVideo","togglePosition1","position1","togglePosition2","position2","togglePosition3","position3","togglePosition4","position4","connection","sessionEventHandlers","sessionConnected","sessionDisconnected","sessionReconnected","sessionReconnecting","publisherEventHandlers","accessDenied","streamCreated","streamDestroyed","reason","subscriberEventHandlers","videoEnabled","videoDisabled","render","width","height"],"sources":["/Users/megnabiederman/Desktop/GamerECSAMPLE/client/src/Stream.js"],"sourcesContent":["import React from 'react';\nimport './style/Backstage.css'\nimport { OTSession, OTPublisher, OTStreams, OTSubscriber } from 'opentok-react';\n\n\nexport default class Stream extends React.Component {\n  componentDidMount(){\n    fetch(\"/api\")\n      .then((res) => res.json())\n      .then((data) => this.setState({apiKey:data.apiKey, sessionId:data.sessionId, token:data.token}))\n      .catch((err) => {\n        console.error('Failed to get session creddentials', err);\n        alert('Failed to get opentok sessionId and token');\n      });\n      \n  }\n  \n  constructor(props) {\n    super(props);\n    \n    \n    this.state = {\n      error: null,\n      connection: 'Connecting',\n      publishVideo: true,\n      position1: false,\n      position2: false,\n      position3: false,\n      position4: false,\n      apiKey:\"\",\n      sessionId:\"\",\n      token:\"\",\n    };\n    \n\n    this.sessionEventHandlers = {\n      sessionConnected: () => {\n        this.setState({ connection: 'Connected' });\n      },\n      sessionDisconnected: () => {\n        this.setState({ connection: 'Disconnected' });\n      },\n      sessionReconnected: () => {\n        this.setState({ connection: 'Reconnected' });\n      },\n      sessionReconnecting: () => {\n        this.setState({ connection: 'Reconnecting' });\n      },\n    };\n\n    this.publisherEventHandlers = {\n      accessDenied: () => {\n        console.log('User denied access to media source');\n      },\n      streamCreated: () => {\n        console.log('Publisher stream created');\n      },\n      streamDestroyed: ({ reason }) => {\n        console.log(`Publisher stream destroyed because: ${reason}`);\n      },\n    };\n\n    this.subscriberEventHandlers = {\n      videoEnabled: () => {\n        console.log('Subscriber video enabled');\n      },\n      videoDisabled: () => {\n        console.log('Subscriber video disabled');\n      },\n    };\n    this.componentDidMount();\n  }\n\n  \n\n\n\n  onSessionError = error => {\n    this.setState({ error });\n  };\n\n  onPublish = () => {\n    console.log('Publish Success');\n  };\n\n  onPublishError = error => {\n    this.setState({ error });\n  };\n\n  onSubscribe = () => {\n    console.log('Subscribe Success');\n  };\n\n  onSubscribeError = error => {\n    this.setState({ error });\n  };\n\n  toggleVideo = () => {\n    this.setState(state => ({\n      publishVideo: !state.publishVideo,\n    }));\n  };\n\n  togglePosition1 = () => {\n    this.setState(state => ({\n      position1: !state.position1,\n    }));\n  };\n\n  togglePosition2 = () => {\n    this.setState(state => ({\n      position2: !state.position2,\n    }));\n  };\n\n  togglePosition3 = () => {\n    this.setState(state => ({\n      position3: !state.position3,\n    }));\n  };\n\n  togglePosition4 = () => {\n    this.setState(state => ({\n      position4: !state.position4,\n    }));\n  };\n\n\n\n\n  render(){\n    \n    const { apiKey, sessionId, token, publishVideo } = this.state;\n    //alert(apiKey);\n    return(\n      <div>\n        {apiKey !== \"\" && sessionId !== \"\" && token !== \"\" && \n\n          <OTSession\n            apiKey={apiKey}\n            sessionId={sessionId}\n            token={token}\n            onError={this.onSessionError}\n            eventHandlers={this.sessionEventHandlers}\n          >\n            <div className='OT_publisher'>\n              <OTPublisher\n                properties={{ publishVideo, width:150,height:120 }}\n                onPublish={this.onPublish}\n                onError={this.onPublishError}\n                eventHandlers={this.publisherEventHandlers}\n              />\n              <div class=\"dropdown\">\n                <button class=\"dropbtn\">Video Settings</button>\n                  <div class=\"dropdown-content\">\n                  <button id=\"videoButton\" onClick={this.toggleVideo}>\n                  {publishVideo ? 'Disable' : 'Enable'} Video\n                  </button>\n\n                  <button id=\"position1\" onClick={this.togglePosition1}> Position 1 </button>\n                  <button id=\"position2\" onClick={this.togglePosition2}> Position 2 </button>\n                  <button id=\"position3\" onClick={this.togglePosition3}> Position 3 </button>\n                  <button id=\"position4\" onClick={this.togglePosition4}> Position 4 </button>\n                    \n                   </div>\n              </div>\n            </div>\n            \n            <OTStreams>\n              \n              <OTSubscriber\n                properties={{ width: 150, height: 120 }}\n                onSubscribe={this.onSubscribe}\n                onError={this.onSubscribeError}\n                eventHandlers={this.subscriberEventHandlers}\n              />\n              \n            </OTStreams>\n\n          </OTSession>\n        }\n        </div>\n    );\n  }\n}"],"mappings":"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"},"metadata":{},"sourceType":"module"}