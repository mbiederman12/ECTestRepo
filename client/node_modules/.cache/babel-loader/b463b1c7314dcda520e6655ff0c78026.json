{"ast":null,"code":"var _jsxFileName = \"/Users/megnabiederman/Desktop/GamerECSAMPLE/client/src/Stream.js\";\nimport React from 'react';\nimport './style/Backstage.css';\nimport { OTSession, OTPublisher, OTStreams, OTSubscriber } from 'opentok-react';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default class Stream extends React.Component {\n  constructor(props) {\n    var _s = $RefreshSig$();\n\n    super(props);\n    this.getData = _s(() => {\n      _s();\n\n      const [data, setData] = React.useState(null);\n      React.useEffect(() => {\n        fetch(\"/api\").then(res => res.json()).then(data => setData(data)).catch(err => {\n          console.error('Failed to get session creddentials', err);\n          alert('Failed to get opentok sessionId and token');\n        });\n      }, []);\n      this.setState(state => ({\n        apiKey: data.apiKey,\n        sessionId: data.sessionId,\n        token: data.token\n      }));\n    }, \"fQZRxy/+nAZ7NLS1X4dVhrlp8Go=\");\n\n    this.onSessionError = error => {\n      this.setState({\n        error\n      });\n    };\n\n    this.onPublish = () => {\n      console.log('Publish Success');\n    };\n\n    this.onPublishError = error => {\n      this.setState({\n        error\n      });\n    };\n\n    this.onSubscribe = () => {\n      console.log('Subscribe Success');\n    };\n\n    this.onSubscribeError = error => {\n      this.setState({\n        error\n      });\n    };\n\n    this.toggleVideo = () => {\n      this.setState(state => ({\n        publishVideo: !state.publishVideo\n      }));\n    };\n\n    this.state = {\n      error: null,\n      connection: 'Connecting',\n      publishVideo: true,\n      apiKey: \"\",\n      sessionId: \"\",\n      token: \"\"\n    };\n    this.sessionEventHandlers = {\n      sessionConnected: () => {\n        this.setState({\n          connection: 'Connected'\n        });\n      },\n      sessionDisconnected: () => {\n        this.setState({\n          connection: 'Disconnected'\n        });\n      },\n      sessionReconnected: () => {\n        this.setState({\n          connection: 'Reconnected'\n        });\n      },\n      sessionReconnecting: () => {\n        this.setState({\n          connection: 'Reconnecting'\n        });\n      }\n    };\n    this.publisherEventHandlers = {\n      accessDenied: () => {\n        console.log('User denied access to media source');\n      },\n      streamCreated: () => {\n        console.log('Publisher stream created');\n      },\n      streamDestroyed: _ref => {\n        let {\n          reason\n        } = _ref;\n        console.log(`Publisher stream destroyed because: ${reason}`);\n      }\n    };\n    this.subscriberEventHandlers = {\n      videoEnabled: () => {\n        console.log('Subscriber video enabled');\n      },\n      videoDisabled: () => {\n        console.log('Subscriber video disabled');\n      }\n    };\n  }\n\n  render() {\n    const {\n      error,\n      publishVideo\n    } = this.state;\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [error ? /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"error\",\n        children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n          children: \"Error:\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 114,\n          columnNumber: 13\n        }, this), \" \", error]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 113,\n        columnNumber: 11\n      }, this) : null, /*#__PURE__*/_jsxDEV(OTSession, {\n        apiKey: this.apiKey,\n        sessionId: \"2_MX40NzUxMjczMX5-MTY1NTMxMzY0NTExMH5ObWhDckljbGFaOGU2VmluL0lHMXUyak5-fg\",\n        token: \"T1==cGFydG5lcl9pZD00NzUxMjczMSZzaWc9MWVhMTU2OTA1ZTE5ZDI4ZTZhZjM3NjczNDZhODUxZTc5NmZhZDg2ZTpzZXNzaW9uX2lkPTJfTVg0ME56VXhNamN6TVg1LU1UWTFOVE14TXpZME5URXhNSDVPYldoRGNrbGpiR0ZhT0dVMlZtbHVMMGxITVhVeWFrNS1mZyZjcmVhdGVfdGltZT0xNjU1MzEzOTE2Jm5vbmNlPTAuMjE3NzUwOTk2MjEzNzQyNzImcm9sZT1wdWJsaXNoZXImZXhwaXJlX3RpbWU9MTY1NTQwMDMxNiZpbml0aWFsX2xheW91dF9jbGFzc19saXN0PQ==\",\n        onError: this.onSessionError,\n        eventHandlers: this.sessionEventHandlers,\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"OT_publisher\",\n          children: [/*#__PURE__*/_jsxDEV(OTPublisher, {\n            properties: {\n              publishVideo,\n              width: 150,\n              height: 120\n            },\n            onPublish: this.onPublish,\n            onError: this.onPublishError,\n            eventHandlers: this.publisherEventHandlers\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 125,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            id: \"videoButton\",\n            onClick: this.toggleVideo,\n            children: [publishVideo ? 'Disable' : 'Enable', \" Video\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 131,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 124,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(OTStreams, {\n          children: /*#__PURE__*/_jsxDEV(OTSubscriber, {\n            properties: {\n              width: 150,\n              height: 120\n            },\n            onSubscribe: this.onSubscribe,\n            onError: this.onSubscribeError,\n            eventHandlers: this.subscriberEventHandlers\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 139,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 137,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 117,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 111,\n      columnNumber: 7\n    }, this);\n  }\n\n}","map":{"version":3,"names":["React","OTSession","OTPublisher","OTStreams","OTSubscriber","Stream","Component","constructor","props","getData","data","setData","useState","useEffect","fetch","then","res","json","catch","err","console","error","alert","setState","state","apiKey","sessionId","token","onSessionError","onPublish","log","onPublishError","onSubscribe","onSubscribeError","toggleVideo","publishVideo","connection","sessionEventHandlers","sessionConnected","sessionDisconnected","sessionReconnected","sessionReconnecting","publisherEventHandlers","accessDenied","streamCreated","streamDestroyed","reason","subscriberEventHandlers","videoEnabled","videoDisabled","render","width","height"],"sources":["/Users/megnabiederman/Desktop/GamerECSAMPLE/client/src/Stream.js"],"sourcesContent":["import React from 'react';\nimport './style/Backstage.css'\nimport { OTSession, OTPublisher, OTStreams, OTSubscriber } from 'opentok-react';\n\n\nexport default class Stream extends React.Component {\n  \n  constructor(props) {\n    super(props);\n    \n    \n    this.state = {\n      error: null,\n      connection: 'Connecting',\n      publishVideo: true,\n      apiKey:\"\",\n      sessionId:\"\",\n      token:\"\",\n    };\n    \n\n    this.sessionEventHandlers = {\n      sessionConnected: () => {\n        this.setState({ connection: 'Connected' });\n      },\n      sessionDisconnected: () => {\n        this.setState({ connection: 'Disconnected' });\n      },\n      sessionReconnected: () => {\n        this.setState({ connection: 'Reconnected' });\n      },\n      sessionReconnecting: () => {\n        this.setState({ connection: 'Reconnecting' });\n      },\n    };\n\n    this.publisherEventHandlers = {\n      accessDenied: () => {\n        console.log('User denied access to media source');\n      },\n      streamCreated: () => {\n        console.log('Publisher stream created');\n      },\n      streamDestroyed: ({ reason }) => {\n        console.log(`Publisher stream destroyed because: ${reason}`);\n      },\n    };\n\n    this.subscriberEventHandlers = {\n      videoEnabled: () => {\n        console.log('Subscriber video enabled');\n      },\n      videoDisabled: () => {\n        console.log('Subscriber video disabled');\n      },\n    };\n  }\n\n  getData = () => {\n    const [data, setData] = React.useState(null);\n    React.useEffect(() => {\n      fetch(\"/api\")\n        .then((res) => res.json())\n        .then((data) => setData(data))\n        .catch((err) => {\n          console.error('Failed to get session creddentials', err);\n          alert('Failed to get opentok sessionId and token');\n        });\n        \n    }, []);\n\n    this.setState(state => ({\n      apiKey: data.apiKey,\n      sessionId: data.sessionId,\n      token: data.token,\n    }));\n  }\n\n  onSessionError = error => {\n    this.setState({ error });\n  };\n\n  onPublish = () => {\n    console.log('Publish Success');\n  };\n\n  onPublishError = error => {\n    this.setState({ error });\n  };\n\n  onSubscribe = () => {\n    console.log('Subscribe Success');\n  };\n\n  onSubscribeError = error => {\n    this.setState({ error });\n  };\n\n  toggleVideo = () => {\n    this.setState(state => ({\n      publishVideo: !state.publishVideo,\n    }));\n  };\n\n\n\n  render(){\n    \n    const { error, publishVideo } = this.state;\n    return(\n      <div>\n        {error ? (\n          <div className=\"error\">\n            <strong>Error:</strong> {error}\n          </div>\n        ) : null}\n          <OTSession\n            apiKey={this.apiKey}\n            sessionId='2_MX40NzUxMjczMX5-MTY1NTMxMzY0NTExMH5ObWhDckljbGFaOGU2VmluL0lHMXUyak5-fg'\n            token='T1==cGFydG5lcl9pZD00NzUxMjczMSZzaWc9MWVhMTU2OTA1ZTE5ZDI4ZTZhZjM3NjczNDZhODUxZTc5NmZhZDg2ZTpzZXNzaW9uX2lkPTJfTVg0ME56VXhNamN6TVg1LU1UWTFOVE14TXpZME5URXhNSDVPYldoRGNrbGpiR0ZhT0dVMlZtbHVMMGxITVhVeWFrNS1mZyZjcmVhdGVfdGltZT0xNjU1MzEzOTE2Jm5vbmNlPTAuMjE3NzUwOTk2MjEzNzQyNzImcm9sZT1wdWJsaXNoZXImZXhwaXJlX3RpbWU9MTY1NTQwMDMxNiZpbml0aWFsX2xheW91dF9jbGFzc19saXN0PQ=='\n            onError={this.onSessionError}\n            eventHandlers={this.sessionEventHandlers}\n          >\n            <div className='OT_publisher'>\n              <OTPublisher\n                properties={{ publishVideo, width:150,height:120 }}\n                onPublish={this.onPublish}\n                onError={this.onPublishError}\n                eventHandlers={this.publisherEventHandlers}\n              />\n              <button id=\"videoButton\" onClick={this.toggleVideo}>\n                  {publishVideo ? 'Disable' : 'Enable'} Video\n              </button>\n              \n            </div>\n            \n            <OTStreams>\n              \n              <OTSubscriber\n                properties={{ width: 150, height: 120 }}\n                onSubscribe={this.onSubscribe}\n                onError={this.onSubscribeError}\n                eventHandlers={this.subscriberEventHandlers}\n              />\n              \n            </OTStreams>\n\n          </OTSession>\n        </div>\n    );\n  }\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}