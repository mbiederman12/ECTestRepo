{"ast":null,"code":"import _classCallCheck from\"/Users/megnabiederman/Desktop/GamerECSAMPLE/client/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";import _createClass from\"/Users/megnabiederman/Desktop/GamerECSAMPLE/client/node_modules/@babel/runtime/helpers/esm/createClass.js\";import _inherits from\"/Users/megnabiederman/Desktop/GamerECSAMPLE/client/node_modules/@babel/runtime/helpers/esm/inherits.js\";import _createSuper from\"/Users/megnabiederman/Desktop/GamerECSAMPLE/client/node_modules/@babel/runtime/helpers/esm/createSuper.js\";import React from'react';import'../style/Video.css';import{OTSubscriber,OTSession,OTStreams}from'opentok-react';import{jsx as _jsx}from\"react/jsx-runtime\";var Subscriber=/*#__PURE__*/function(_React$Component){_inherits(Subscriber,_React$Component);var _super=_createSuper(Subscriber);function Subscriber(props){var _this;_classCallCheck(this,Subscriber);_this=_super.call(this,props);_this.onSessionError=function(error){_this.setState({error:error});};_this.onSubscribe=function(){console.log('Subscribe Success');};_this.onSubscribeError=function(error){_this.setState({error:error});};_this.toggleVideo=function(){_this.setState(function(state){return{publishVideo:!state.publishVideo};});};_this.state={error:null,connection:'Connecting',apiKey:\"\",sessionId:\"\",token:\"\"};_this.subscriberEventHandlers={videoEnabled:function videoEnabled(){console.log('Subscriber video enabled');},videoDisabled:function videoDisabled(){console.log('Subscriber video disabled');}};_this.componentDidMount();return _this;}_createClass(Subscriber,[{key:\"componentDidMount\",value:function componentDidMount(){var _this2=this;fetch(\"/createnewsession\").then(function(res){return res.json();}).then(function(data){return _this2.setState({apiKey:data.apiKey,sessionId:data.sessionId,token:data.token});}).catch(function(err){console.error('Failed to get session creddentials',err);});}},{key:\"render\",value:function render(){var _this$state=this.state,apiKey=_this$state.apiKey,sessionId=_this$state.sessionId,token=_this$state.token;return/*#__PURE__*/_jsx(\"div\",{className:\"Video\",children:apiKey!==\"\"&&sessionId!==\"\"&&token!==\"\"&&/*#__PURE__*/_jsx(OTSession,{apiKey:apiKey,sessionId:sessionId,token:token,onError:this.onSessionError,eventHandlers:this.sessionEventHandlers,children:/*#__PURE__*/_jsx(\"div\",{className:\"OT_subscriber\",children:/*#__PURE__*/_jsx(OTStreams,{children:/*#__PURE__*/_jsx(OTSubscriber,{properties:{width:700,height:550},onSubscribe:this.onSubscribe,onError:this.onSubscribeError,eventHandlers:this.subscriberEventHandlers})})})})});}}]);return Subscriber;}(React.Component);export{Subscriber as default};","map":{"version":3,"names":["React","OTSubscriber","OTSession","OTStreams","Subscriber","props","onSessionError","error","setState","onSubscribe","console","log","onSubscribeError","toggleVideo","state","publishVideo","connection","apiKey","sessionId","token","subscriberEventHandlers","videoEnabled","videoDisabled","componentDidMount","fetch","then","res","json","data","catch","err","sessionEventHandlers","width","height","Component"],"sources":["/Users/megnabiederman/Desktop/GamerECSAMPLE/client/src/components/Subscriber.js"],"sourcesContent":["import React from 'react';\nimport '../style/Video.css'\nimport { OTSubscriber, OTSession, OTStreams } from 'opentok-react';\n\n\nexport default class Subscriber extends React.Component {\n  componentDidMount(){\n    fetch(\"/createnewsession\")\n      .then((res) => res.json())\n      .then((data) => this.setState({apiKey:data.apiKey, sessionId:data.sessionId, token:data.token}))\n      .catch((err) => {\n        console.error('Failed to get session creddentials', err);\n      });\n      \n  }\n  \n  constructor(props) {\n    super(props);\n    \n    \n    this.state = {\n      error: null,\n      connection: 'Connecting',\n      apiKey:\"\",\n      sessionId:\"\",\n      token:\"\",\n    };\n\n    this.subscriberEventHandlers = {\n        videoEnabled: () => {\n          console.log('Subscriber video enabled');\n        },\n        videoDisabled: () => {\n          console.log('Subscriber video disabled');\n        },\n      };\n      this.componentDidMount();\n    \n    }\n\n    onSessionError = error => {\n      this.setState({ error });\n    };\n  \n    onSubscribe = () => {\n        console.log('Subscribe Success');\n      };\n    \n    onSubscribeError = error => {\n    this.setState({ error });\n    };\n\n    toggleVideo = () => {\n    this.setState(state => ({\n        publishVideo: !state.publishVideo,\n    }));\n    };\n  \nrender() {\n    const { apiKey, sessionId, token } = this.state;\n\n    return (\n      \n      <div className='Video'>\n        {apiKey !== \"\" && sessionId !== \"\" && token !== \"\" && \n        <OTSession\n            apiKey={apiKey}\n            sessionId={sessionId}\n            token={token}\n            onError={this.onSessionError}\n            eventHandlers={this.sessionEventHandlers}\n          >\n            <div className='OT_subscriber'>\n            <OTStreams>\n              \n              <OTSubscriber\n                properties={{ width: 700, height: 550 }}\n                onSubscribe={this.onSubscribe}\n                onError={this.onSubscribeError}\n                eventHandlers={this.subscriberEventHandlers}\n              />\n              \n            </OTStreams>\n            </div>\n\n          </OTSession>\n        }\n      </div>\n        \n\n    )\n  }\n}\n"],"mappings":"ghBAAA,MAAOA,MAAP,KAAkB,OAAlB,CACA,MAAO,oBAAP,CACA,OAASC,YAAT,CAAuBC,SAAvB,CAAkCC,SAAlC,KAAmD,eAAnD,C,8CAGqBC,W,oHAWnB,oBAAYC,KAAZ,CAAmB,4CACjB,uBAAMA,KAAN,EADiB,MAwBjBC,cAxBiB,CAwBA,SAAAC,KAAK,CAAI,CACxB,MAAKC,QAAL,CAAc,CAAED,KAAK,CAALA,KAAF,CAAd,EACD,CA1BgB,OA4BjBE,WA5BiB,CA4BH,UAAM,CAChBC,OAAO,CAACC,GAAR,CAAY,mBAAZ,EACD,CA9Bc,OAgCjBC,gBAhCiB,CAgCE,SAAAL,KAAK,CAAI,CAC5B,MAAKC,QAAL,CAAc,CAAED,KAAK,CAALA,KAAF,CAAd,EACC,CAlCgB,OAoCjBM,WApCiB,CAoCH,UAAM,CACpB,MAAKL,QAAL,CAAc,SAAAM,KAAK,QAAK,CACpBC,YAAY,CAAE,CAACD,KAAK,CAACC,YADD,CAAL,EAAnB,EAGC,CAxCgB,CAIjB,MAAKD,KAAL,CAAa,CACXP,KAAK,CAAE,IADI,CAEXS,UAAU,CAAE,YAFD,CAGXC,MAAM,CAAC,EAHI,CAIXC,SAAS,CAAC,EAJC,CAKXC,KAAK,CAAC,EALK,CAAb,CAQA,MAAKC,uBAAL,CAA+B,CAC3BC,YAAY,CAAE,uBAAM,CAClBX,OAAO,CAACC,GAAR,CAAY,0BAAZ,EACD,CAH0B,CAI3BW,aAAa,CAAE,wBAAM,CACnBZ,OAAO,CAACC,GAAR,CAAY,2BAAZ,EACD,CAN0B,CAA/B,CAQE,MAAKY,iBAAL,GApBe,aAsBhB,C,wDAhCH,4BAAmB,iBACjBC,KAAK,CAAC,mBAAD,CAAL,CACGC,IADH,CACQ,SAACC,GAAD,QAASA,IAAG,CAACC,IAAJ,EAAT,EADR,EAEGF,IAFH,CAEQ,SAACG,IAAD,QAAU,OAAI,CAACpB,QAAL,CAAc,CAACS,MAAM,CAACW,IAAI,CAACX,MAAb,CAAqBC,SAAS,CAACU,IAAI,CAACV,SAApC,CAA+CC,KAAK,CAACS,IAAI,CAACT,KAA1D,CAAd,CAAV,EAFR,EAGGU,KAHH,CAGS,SAACC,GAAD,CAAS,CACdpB,OAAO,CAACH,KAAR,CAAc,oCAAd,CAAoDuB,GAApD,EACD,CALH,EAOD,C,sBA4CH,iBAAS,CACL,gBAAqC,KAAKhB,KAA1C,CAAQG,MAAR,aAAQA,MAAR,CAAgBC,SAAhB,aAAgBA,SAAhB,CAA2BC,KAA3B,aAA2BA,KAA3B,CAEA,mBAEE,YAAK,SAAS,CAAC,OAAf,UACGF,MAAM,GAAK,EAAX,EAAiBC,SAAS,GAAK,EAA/B,EAAqCC,KAAK,GAAK,EAA/C,eACD,KAAC,SAAD,EACI,MAAM,CAAEF,MADZ,CAEI,SAAS,CAAEC,SAFf,CAGI,KAAK,CAAEC,KAHX,CAII,OAAO,CAAE,KAAKb,cAJlB,CAKI,aAAa,CAAE,KAAKyB,oBALxB,uBAOI,YAAK,SAAS,CAAC,eAAf,uBACA,KAAC,SAAD,wBAEE,KAAC,YAAD,EACE,UAAU,CAAE,CAAEC,KAAK,CAAE,GAAT,CAAcC,MAAM,CAAE,GAAtB,CADd,CAEE,WAAW,CAAE,KAAKxB,WAFpB,CAGE,OAAO,CAAE,KAAKG,gBAHhB,CAIE,aAAa,CAAE,KAAKQ,uBAJtB,EAFF,EADA,EAPJ,EAFF,EAFF,CA8BD,C,wBAtFqCpB,KAAK,CAACkC,S,SAAzB9B,U"},"metadata":{},"sourceType":"module"}