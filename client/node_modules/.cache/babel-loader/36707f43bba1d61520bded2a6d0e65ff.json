{"ast":null,"code":"'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = createSession;\n\nfunction createSession() {\n  var _ref = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {},\n      apiKey = _ref.apiKey,\n      sessionId = _ref.sessionId,\n      token = _ref.token,\n      onStreamsUpdated = _ref.onStreamsUpdated,\n      onConnect = _ref.onConnect,\n      onError = _ref.onError,\n      options = _ref.options;\n\n  if (!apiKey) {\n    throw new Error('Missing apiKey');\n  }\n\n  if (!sessionId) {\n    throw new Error('Missing sessionId');\n  }\n\n  if (!token) {\n    throw new Error('Missing token');\n  }\n\n  var streams = [];\n\n  var onStreamCreated = function onStreamCreated(event) {\n    var index = streams.findIndex(function (stream) {\n      return stream.id === event.stream.id;\n    });\n\n    if (index < 0) {\n      streams.push(event.stream);\n      onStreamsUpdated(streams);\n    }\n  };\n\n  var onStreamDestroyed = function onStreamDestroyed(event) {\n    var index = streams.findIndex(function (stream) {\n      return stream.id === event.stream.id;\n    });\n\n    if (index >= 0) {\n      streams.splice(index, 1);\n      onStreamsUpdated(streams);\n    }\n  };\n\n  var eventHandlers = {\n    streamCreated: onStreamCreated,\n    streamDestroyed: onStreamDestroyed\n  };\n  var session = OT.initSession(apiKey, sessionId, options);\n  session.on(eventHandlers);\n  session.connect(token, function (err) {\n    if (!session) {\n      // Either this session has been disconnected or OTSession\n      // has been unmounted so don't invoke any callbacks\n      return;\n    }\n\n    if (err && typeof onError === 'function') {\n      onError(err);\n    } else if (!err && typeof onConnect === 'function') {\n      onConnect();\n    }\n  });\n  return {\n    session: session,\n    streams: streams,\n    disconnect: function disconnect() {\n      if (session) {\n        session.off(eventHandlers);\n        session.disconnect();\n      }\n\n      streams = null;\n      onStreamCreated = null;\n      onStreamDestroyed = null;\n      eventHandlers = null;\n      session = null;\n      this.session = null;\n      this.streams = null;\n    }\n  };\n}","map":{"version":3,"names":["Object","defineProperty","exports","value","default","createSession","_ref","arguments","length","undefined","apiKey","sessionId","token","onStreamsUpdated","onConnect","onError","options","Error","streams","onStreamCreated","event","index","findIndex","stream","id","push","onStreamDestroyed","splice","eventHandlers","streamCreated","streamDestroyed","session","OT","initSession","on","connect","err","disconnect","off"],"sources":["/Users/megnabiederman/Desktop/EC Test Project/client/node_modules/opentok-react/dist/createSession.js"],"sourcesContent":["'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = createSession;\nfunction createSession() {\n  var _ref = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {},\n      apiKey = _ref.apiKey,\n      sessionId = _ref.sessionId,\n      token = _ref.token,\n      onStreamsUpdated = _ref.onStreamsUpdated,\n      onConnect = _ref.onConnect,\n      onError = _ref.onError,\n      options = _ref.options;\n\n  if (!apiKey) {\n    throw new Error('Missing apiKey');\n  }\n\n  if (!sessionId) {\n    throw new Error('Missing sessionId');\n  }\n\n  if (!token) {\n    throw new Error('Missing token');\n  }\n\n  var streams = [];\n\n  var onStreamCreated = function onStreamCreated(event) {\n    var index = streams.findIndex(function (stream) {\n      return stream.id === event.stream.id;\n    });\n    if (index < 0) {\n      streams.push(event.stream);\n      onStreamsUpdated(streams);\n    }\n  };\n\n  var onStreamDestroyed = function onStreamDestroyed(event) {\n    var index = streams.findIndex(function (stream) {\n      return stream.id === event.stream.id;\n    });\n    if (index >= 0) {\n      streams.splice(index, 1);\n      onStreamsUpdated(streams);\n    }\n  };\n\n  var eventHandlers = {\n    streamCreated: onStreamCreated,\n    streamDestroyed: onStreamDestroyed\n  };\n\n  var session = OT.initSession(apiKey, sessionId, options);\n  session.on(eventHandlers);\n  session.connect(token, function (err) {\n    if (!session) {\n      // Either this session has been disconnected or OTSession\n      // has been unmounted so don't invoke any callbacks\n      return;\n    }\n    if (err && typeof onError === 'function') {\n      onError(err);\n    } else if (!err && typeof onConnect === 'function') {\n      onConnect();\n    }\n  });\n\n  return {\n    session: session,\n    streams: streams,\n    disconnect: function disconnect() {\n      if (session) {\n        session.off(eventHandlers);\n        session.disconnect();\n      }\n\n      streams = null;\n      onStreamCreated = null;\n      onStreamDestroyed = null;\n      eventHandlers = null;\n      session = null;\n\n      this.session = null;\n      this.streams = null;\n    }\n  };\n}"],"mappings":"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"},"metadata":{},"sourceType":"script"}