{"ast":null,"code":"var _jsxFileName = \"/Users/megnabiederman/Desktop/GamerECSAMPLE/client/src/Backstage.js\";\nimport React from \"react\";\nimport './style/Backstage.css';\nimport Publisher from './components/Publisher';\nimport Subscriber from './components/Subscriber';\nimport { OTSession, OTStreams } from 'opentok-react';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default class BackstagePage extends React.Component {\n  componentDidMount() {\n    fetch(\"/api\").then(res => res.json()).then(data => this.setState({\n      apiKey: data.apiKey,\n      sessionId: data.sessionId,\n      token: data.token\n    })).catch(err => {\n      console.error('Failed to get session creddentials', err);\n      alert('Failed to get opentok sessionId and token');\n    });\n  }\n\n  constructor(props) {\n    super(props);\n\n    this.onSessionError = error => {\n      this.setState({\n        error\n      });\n    };\n\n    this.state = {\n      error: null,\n      connection: 'Connecting',\n      apiKey: \"\",\n      sessionId: \"\",\n      token: \"\"\n    };\n    this.sessionEventHandlers = {\n      sessionConnected: () => {\n        this.setState({\n          connection: 'Connected'\n        });\n      },\n      sessionDisconnected: () => {\n        this.setState({\n          connection: 'Disconnected'\n        });\n      },\n      sessionReconnected: () => {\n        this.setState({\n          connection: 'Reconnected'\n        });\n      },\n      sessionReconnecting: () => {\n        this.setState({\n          connection: 'Reconnecting'\n        });\n      }\n    };\n    this.componentDidMount();\n  }\n\n  render() {\n    const {\n      apiKey,\n      sessionId,\n      token\n    } = this.state;\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"Backstage\",\n      children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n        children: \"BACKSTAGE\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 57,\n        columnNumber: 13\n      }, this), apiKey !== \"\" && sessionId !== \"\" && token !== \"\" && /*#__PURE__*/_jsxDEV(OTSession, {\n        apiKey: apiKey,\n        sessionId: sessionId,\n        token: token,\n        onError: this.onSessionError,\n        eventHandlers: this.sessionEventHandlers,\n        children: [/*#__PURE__*/_jsxDEV(Publisher, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 67,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(OTStreams, {\n          children: /*#__PURE__*/_jsxDEV(Subscriber, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 71,\n            columnNumber: 17\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 69,\n          columnNumber: 15\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 59,\n        columnNumber: 13\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 56,\n      columnNumber: 9\n    }, this);\n  }\n\n}","map":{"version":3,"names":["React","Publisher","Subscriber","OTSession","OTStreams","BackstagePage","Component","componentDidMount","fetch","then","res","json","data","setState","apiKey","sessionId","token","catch","err","console","error","alert","constructor","props","onSessionError","state","connection","sessionEventHandlers","sessionConnected","sessionDisconnected","sessionReconnected","sessionReconnecting","render"],"sources":["/Users/megnabiederman/Desktop/GamerECSAMPLE/client/src/Backstage.js"],"sourcesContent":["import React from \"react\";\nimport './style/Backstage.css'\nimport Publisher from './components/Publisher';\nimport Subscriber from './components/Subscriber';\nimport { OTSession, OTStreams } from 'opentok-react';\n\nexport default class BackstagePage extends React.Component {\n\n  componentDidMount(){\n    fetch(\"/api\")\n      .then((res) => res.json())\n      .then((data) => this.setState({apiKey:data.apiKey, sessionId:data.sessionId, token:data.token}))\n      .catch((err) => {\n        console.error('Failed to get session creddentials', err);\n        alert('Failed to get opentok sessionId and token');\n      });\n      \n  }\n  \n  constructor(props) {\n    super(props);\n    \n    this.state = {\n      error: null,\n      connection: 'Connecting',\n      apiKey:\"\",\n      sessionId:\"\",\n      token:\"\",\n    };\n\n    this.sessionEventHandlers = {\n      sessionConnected: () => {\n        this.setState({ connection: 'Connected' });\n      },\n      sessionDisconnected: () => {\n        this.setState({ connection: 'Disconnected' });\n      },\n      sessionReconnected: () => {\n        this.setState({ connection: 'Reconnected' });\n      },\n      sessionReconnecting: () => {\n        this.setState({ connection: 'Reconnecting' });\n      },\n    };\n\n    this.componentDidMount();\n  };\n\n  onSessionError = error => {\n    this.setState({ error });\n  };\n\n  render(){\n    const { apiKey, sessionId, token } = this.state;\n    return(\n        <div className=\"Backstage\">\n            <h4>BACKSTAGE</h4>\n            {apiKey !== \"\" && sessionId !== \"\" && token !== \"\" && \n            <OTSession\n              apiKey={apiKey}\n              sessionId={sessionId}\n              token={token}\n              onError={this.onSessionError}\n              eventHandlers={this.sessionEventHandlers}\n            >\n\n              <Publisher />\n\n              <OTStreams>\n                \n                <Subscriber />\n                \n              </OTStreams>\n            </OTSession>\n            }\n            \n        </div>\n    );\n  }\n}\n"],"mappings":";AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,OAAO,uBAAP;AACA,OAAOC,SAAP,MAAsB,wBAAtB;AACA,OAAOC,UAAP,MAAuB,yBAAvB;AACA,SAASC,SAAT,EAAoBC,SAApB,QAAqC,eAArC;;AAEA,eAAe,MAAMC,aAAN,SAA4BL,KAAK,CAACM,SAAlC,CAA4C;EAEzDC,iBAAiB,GAAE;IACjBC,KAAK,CAAC,MAAD,CAAL,CACGC,IADH,CACSC,GAAD,IAASA,GAAG,CAACC,IAAJ,EADjB,EAEGF,IAFH,CAESG,IAAD,IAAU,KAAKC,QAAL,CAAc;MAACC,MAAM,EAACF,IAAI,CAACE,MAAb;MAAqBC,SAAS,EAACH,IAAI,CAACG,SAApC;MAA+CC,KAAK,EAACJ,IAAI,CAACI;IAA1D,CAAd,CAFlB,EAGGC,KAHH,CAGUC,GAAD,IAAS;MACdC,OAAO,CAACC,KAAR,CAAc,oCAAd,EAAoDF,GAApD;MACAG,KAAK,CAAC,2CAAD,CAAL;IACD,CANH;EAQD;;EAEDC,WAAW,CAACC,KAAD,EAAQ;IACjB,MAAMA,KAAN;;IADiB,KA6BnBC,cA7BmB,GA6BFJ,KAAK,IAAI;MACxB,KAAKP,QAAL,CAAc;QAAEO;MAAF,CAAd;IACD,CA/BkB;;IAGjB,KAAKK,KAAL,GAAa;MACXL,KAAK,EAAE,IADI;MAEXM,UAAU,EAAE,YAFD;MAGXZ,MAAM,EAAC,EAHI;MAIXC,SAAS,EAAC,EAJC;MAKXC,KAAK,EAAC;IALK,CAAb;IAQA,KAAKW,oBAAL,GAA4B;MAC1BC,gBAAgB,EAAE,MAAM;QACtB,KAAKf,QAAL,CAAc;UAAEa,UAAU,EAAE;QAAd,CAAd;MACD,CAHyB;MAI1BG,mBAAmB,EAAE,MAAM;QACzB,KAAKhB,QAAL,CAAc;UAAEa,UAAU,EAAE;QAAd,CAAd;MACD,CANyB;MAO1BI,kBAAkB,EAAE,MAAM;QACxB,KAAKjB,QAAL,CAAc;UAAEa,UAAU,EAAE;QAAd,CAAd;MACD,CATyB;MAU1BK,mBAAmB,EAAE,MAAM;QACzB,KAAKlB,QAAL,CAAc;UAAEa,UAAU,EAAE;QAAd,CAAd;MACD;IAZyB,CAA5B;IAeA,KAAKnB,iBAAL;EACD;;EAMDyB,MAAM,GAAE;IACN,MAAM;MAAElB,MAAF;MAAUC,SAAV;MAAqBC;IAArB,IAA+B,KAAKS,KAA1C;IACA,oBACI;MAAK,SAAS,EAAC,WAAf;MAAA,wBACI;QAAA;MAAA;QAAA;QAAA;QAAA;MAAA,QADJ,EAEKX,MAAM,KAAK,EAAX,IAAiBC,SAAS,KAAK,EAA/B,IAAqCC,KAAK,KAAK,EAA/C,iBACD,QAAC,SAAD;QACE,MAAM,EAAEF,MADV;QAEE,SAAS,EAAEC,SAFb;QAGE,KAAK,EAAEC,KAHT;QAIE,OAAO,EAAE,KAAKQ,cAJhB;QAKE,aAAa,EAAE,KAAKG,oBALtB;QAAA,wBAQE,QAAC,SAAD;UAAA;UAAA;UAAA;QAAA,QARF,eAUE,QAAC,SAAD;UAAA,uBAEE,QAAC,UAAD;YAAA;YAAA;YAAA;UAAA;QAFF;UAAA;UAAA;UAAA;QAAA,QAVF;MAAA;QAAA;QAAA;QAAA;MAAA,QAHJ;IAAA;MAAA;MAAA;MAAA;IAAA,QADJ;EAwBD;;AAxEwD"},"metadata":{},"sourceType":"module"}