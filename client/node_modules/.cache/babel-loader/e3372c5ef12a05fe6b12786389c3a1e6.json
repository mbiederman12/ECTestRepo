{"ast":null,"code":"var _jsxFileName = \"/Users/megnabiederman/Desktop/GamerECSAMPLE/client/src/components/Publisher.js\";\nimport React from 'react';\nimport { OTPublisher } from 'opentok-react';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default class Publisher extends React.Component {\n  componentDidMount() {\n    fetch(\"/api\").then(res => res.json()).then(data => this.setState({\n      apiKey: data.apiKey,\n      sessionId: data.sessionId,\n      token: data.token\n    })).catch(err => {\n      console.error('Failed to get session creddentials', err);\n      alert('Failed to get opentok sessionId and token');\n    });\n  }\n\n  constructor(props) {\n    super(props);\n\n    this.setAudio = audio => {\n      this.setState({\n        audio\n      });\n    };\n\n    this.setVideo = video => {\n      this.setState({\n        video\n      });\n    };\n\n    this.changeVideoSource = videoSource => {\n      this.state.videoSource !== 'camera' ? this.setState({\n        videoSource: 'camera'\n      }) : this.setState({\n        videoSource: 'screen'\n      });\n    };\n\n    this.onError = err => {\n      this.setState({\n        error: `Failed to publish: ${err.message}`\n      });\n    };\n\n    this.state = {\n      error: null,\n      connection: 'Connecting',\n      publishVideo: true,\n      audio: true,\n      video: true,\n      videoSource: 'camera',\n      apiKey: \"\",\n      sessionId: \"\",\n      token: \"\"\n    };\n  } // src/components/Publisher.js\n\n\n  render() {\n    const {\n      apiKey,\n      sessionId,\n      token,\n      publishVideo\n    } = this.state;\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      children: apiKey !== \"\" && sessionId !== \"\" && token !== \"\" && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"OT_publisher\",\n        children: [/*#__PURE__*/_jsxDEV(OTPublisher, {\n          properties: {\n            publishVideo,\n            width: 150,\n            height: 120\n          },\n          onPublish: this.onPublish,\n          onError: this.onPublishError,\n          eventHandlers: this.publisherEventHandlers\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 59,\n          columnNumber: 9\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          id: \"videoButton\",\n          onClick: this.toggleVideo,\n          children: [publishVideo ? 'Disable' : 'Enable', \" Video\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 66,\n          columnNumber: 9\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 58,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 55,\n      columnNumber: 7\n    }, this);\n  }\n\n}","map":{"version":3,"names":["React","OTPublisher","Publisher","Component","componentDidMount","fetch","then","res","json","data","setState","apiKey","sessionId","token","catch","err","console","error","alert","constructor","props","setAudio","audio","setVideo","video","changeVideoSource","videoSource","state","onError","message","connection","publishVideo","render","width","height","onPublish","onPublishError","publisherEventHandlers","toggleVideo"],"sources":["/Users/megnabiederman/Desktop/GamerECSAMPLE/client/src/components/Publisher.js"],"sourcesContent":["import React from 'react';\nimport { OTPublisher } from 'opentok-react';\n\n\nexport default class Publisher extends React.Component {\n  componentDidMount(){\n    fetch(\"/api\")\n      .then((res) => res.json())\n      .then((data) => this.setState({apiKey:data.apiKey, sessionId:data.sessionId, token:data.token}))\n      .catch((err) => {\n        console.error('Failed to get session creddentials', err);\n        alert('Failed to get opentok sessionId and token');\n      });\n      \n  }\n  \n  constructor(props) {\n    super(props);\n    \n    \n    this.state = {\n      error: null,\n      connection: 'Connecting',\n      publishVideo: true,\n      audio:true,\n      video:true,\n      videoSource: 'camera',\n      apiKey:\"\",\n      sessionId:\"\",\n      token:\"\",\n    };\n    }\n    // src/components/Publisher.js\n  setAudio = (audio) => {\n    this.setState({ audio });\n  }\n\n  setVideo = (video) => {\n    this.setState({ video });\n  }\n\n  changeVideoSource = (videoSource) => {\n    (this.state.videoSource !== 'camera') ? this.setState({videoSource: 'camera'}) : this.setState({ videoSource: 'screen' })\n  }\n\n  onError = (err) => {\n    this.setState({ error: `Failed to publish: ${err.message}` });\n  }\n  \nrender() {\n    const { apiKey, sessionId, token, publishVideo } = this.state;\n\n    return (\n      \n      <div>\n        {apiKey !== \"\" && sessionId !== \"\" && token !== \"\" && \n\n        <div className='OT_publisher'>\n        <OTPublisher\n          properties={{ publishVideo, width:150,height:120 }}\n          onPublish={this.onPublish}\n          onError={this.onPublishError}\n          eventHandlers={this.publisherEventHandlers}\n        />\n    \n        <button id=\"videoButton\" onClick={this.toggleVideo}>\n        {publishVideo ? 'Disable' : 'Enable'} Video\n        </button>\n        </div>\n        }\n      </div>\n        \n\n    )\n  }\n}\n"],"mappings":";AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,SAASC,WAAT,QAA4B,eAA5B;;AAGA,eAAe,MAAMC,SAAN,SAAwBF,KAAK,CAACG,SAA9B,CAAwC;EACrDC,iBAAiB,GAAE;IACjBC,KAAK,CAAC,MAAD,CAAL,CACGC,IADH,CACSC,GAAD,IAASA,GAAG,CAACC,IAAJ,EADjB,EAEGF,IAFH,CAESG,IAAD,IAAU,KAAKC,QAAL,CAAc;MAACC,MAAM,EAACF,IAAI,CAACE,MAAb;MAAqBC,SAAS,EAACH,IAAI,CAACG,SAApC;MAA+CC,KAAK,EAACJ,IAAI,CAACI;IAA1D,CAAd,CAFlB,EAGGC,KAHH,CAGUC,GAAD,IAAS;MACdC,OAAO,CAACC,KAAR,CAAc,oCAAd,EAAoDF,GAApD;MACAG,KAAK,CAAC,2CAAD,CAAL;IACD,CANH;EAQD;;EAEDC,WAAW,CAACC,KAAD,EAAQ;IACjB,MAAMA,KAAN;;IADiB,KAiBnBC,QAjBmB,GAiBPC,KAAD,IAAW;MACpB,KAAKZ,QAAL,CAAc;QAAEY;MAAF,CAAd;IACD,CAnBkB;;IAAA,KAqBnBC,QArBmB,GAqBPC,KAAD,IAAW;MACpB,KAAKd,QAAL,CAAc;QAAEc;MAAF,CAAd;IACD,CAvBkB;;IAAA,KAyBnBC,iBAzBmB,GAyBEC,WAAD,IAAiB;MAClC,KAAKC,KAAL,CAAWD,WAAX,KAA2B,QAA5B,GAAwC,KAAKhB,QAAL,CAAc;QAACgB,WAAW,EAAE;MAAd,CAAd,CAAxC,GAAiF,KAAKhB,QAAL,CAAc;QAAEgB,WAAW,EAAE;MAAf,CAAd,CAAjF;IACD,CA3BkB;;IAAA,KA6BnBE,OA7BmB,GA6BRb,GAAD,IAAS;MACjB,KAAKL,QAAL,CAAc;QAAEO,KAAK,EAAG,sBAAqBF,GAAG,CAACc,OAAQ;MAA3C,CAAd;IACD,CA/BkB;;IAIjB,KAAKF,KAAL,GAAa;MACXV,KAAK,EAAE,IADI;MAEXa,UAAU,EAAE,YAFD;MAGXC,YAAY,EAAE,IAHH;MAIXT,KAAK,EAAC,IAJK;MAKXE,KAAK,EAAC,IALK;MAMXE,WAAW,EAAE,QANF;MAOXf,MAAM,EAAC,EAPI;MAQXC,SAAS,EAAC,EARC;MASXC,KAAK,EAAC;IATK,CAAb;EAWC,CA3BkD,CA4BnD;;;EAiBJmB,MAAM,GAAG;IACL,MAAM;MAAErB,MAAF;MAAUC,SAAV;MAAqBC,KAArB;MAA4BkB;IAA5B,IAA6C,KAAKJ,KAAxD;IAEA,oBAEE;MAAA,UACGhB,MAAM,KAAK,EAAX,IAAiBC,SAAS,KAAK,EAA/B,IAAqCC,KAAK,KAAK,EAA/C,iBAED;QAAK,SAAS,EAAC,cAAf;QAAA,wBACA,QAAC,WAAD;UACE,UAAU,EAAE;YAAEkB,YAAF;YAAgBE,KAAK,EAAC,GAAtB;YAA0BC,MAAM,EAAC;UAAjC,CADd;UAEE,SAAS,EAAE,KAAKC,SAFlB;UAGE,OAAO,EAAE,KAAKC,cAHhB;UAIE,aAAa,EAAE,KAAKC;QAJtB;UAAA;UAAA;UAAA;QAAA,QADA,eAQA;UAAQ,EAAE,EAAC,aAAX;UAAyB,OAAO,EAAE,KAAKC,WAAvC;UAAA,WACCP,YAAY,GAAG,SAAH,GAAe,QAD5B;QAAA;UAAA;UAAA;UAAA;QAAA,QARA;MAAA;QAAA;QAAA;QAAA;MAAA;IAHF;MAAA;MAAA;MAAA;IAAA,QAFF;EAsBD;;AAtEoD"},"metadata":{},"sourceType":"module"}